---
phase: 12-missing-navigation-routes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/categories/page.tsx
  - src/app/help/page.tsx
  - src/app/profile/page.tsx
  - src/app/settings/page.tsx
  - src/app/provider/gigs/page.tsx
  - prisma/seed.ts
autonomous: true

must_haves:
  truths:
    - "User clicking Categories link in hamburger menu navigates to category browse page (no 404)"
    - "User clicking Help link in hamburger menu navigates to help/support page (no 404)"
    - "User clicking Profile in dropdown navigates to profile page (no 404)"
    - "User clicking Settings in dropdown navigates to settings page (no 404)"
    - "Provider clicking My Gigs in hamburger menu navigates to gig management page (no 404)"
    - "Developer can log in with seed users to test authenticated flows"
  artifacts:
    - path: "src/app/categories/page.tsx"
      provides: "Category browse page with all 13 categories"
      min_lines: 50
    - path: "src/app/help/page.tsx"
      provides: "Help/support information page"
      min_lines: 30
    - path: "src/app/profile/page.tsx"
      provides: "User profile view (redirects to public profile)"
      min_lines: 15
    - path: "src/app/settings/page.tsx"
      provides: "Account settings page"
      min_lines: 40
    - path: "src/app/provider/gigs/page.tsx"
      provides: "Provider gig management page"
      min_lines: 80
    - path: "prisma/seed.ts"
      provides: "Seed users with hashed passwords for login"
      contains: "bcrypt.hash"
  key_links:
    - from: "src/components/layout/DesktopHamburger.tsx"
      to: "/categories"
      via: "Link href at line 75"
      pattern: 'href="/categories"'
    - from: "src/components/layout/DesktopHamburger.tsx"
      to: "/help"
      via: "Link href at line 140"
      pattern: 'href="/help"'
    - from: "src/components/layout/UserDropdown.tsx"
      to: "/profile"
      via: "Link href at line 84"
      pattern: 'href="/profile"'
    - from: "src/components/layout/UserDropdown.tsx"
      to: "/settings"
      via: "Link href at line 92"
      pattern: 'href="/settings"'
    - from: "src/components/layout/DesktopHamburger.tsx"
      to: "/provider/gigs"
      via: "Link href at line 124"
      pattern: 'href="/provider/gigs"'
---

<objective>
Implement all 5 missing navigation routes and enable seed user authentication.

Purpose: Complete v0.2.0 milestone by closing navigation gaps identified in audit. All hamburger menu and dropdown links must resolve to functional pages. Developer must be able to log in with seed users to test authenticated flows.

Output: Five new page components following existing patterns and seed script update with bcrypt password hashing.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Reference existing page patterns
@src/app/gigs/page.tsx
@src/app/dashboard/page.tsx
@src/app/orders/page.tsx

# Reference navigation components with broken links
@src/components/layout/DesktopHamburger.tsx
@src/components/layout/UserDropdown.tsx

# Reference seed infrastructure
@prisma/seed.ts

# Phase summaries
@.planning/phases/09-navigation-components/09-01-SUMMARY.md
@.planning/phases/11-mock-data-generation/11-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Create /categories page with category grid</name>
  <files>src/app/categories/page.tsx</files>
  <action>
Create new Server Component page at src/app/categories/page.tsx displaying all 13 service categories as a browseable grid. Follow existing page patterns from src/app/gigs/page.tsx (layout, styling, responsive design).

Structure:
- Import Category enum and CATEGORY_LABELS from existing locations
- Use same layout pattern: min-h-screen bg-cream-50, max-w-7xl container
- Page header: "Browse by Category" (h1 with text-2xl sm:text-3xl font-bold text-burgundy-900)
- Grid of 13 category cards (grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6)
- Each card: Link to /gigs?category={CATEGORY_VALUE}
  - Display category label from CATEGORY_LABELS
  - Count of active gigs per category (query prisma.gig.count)
  - Card styling: bg-white rounded-xl shadow-card hover:shadow-card-hover transition-shadow p-6 border border-gray-200 hover:border-burgundy-300
- Map through all 13 categories from Category enum
- Server-side: Fetch gig counts for all categories in single query using groupBy

Implementation notes:
- Use Prisma groupBy for efficient category counts: `prisma.gig.groupBy({ by: ['category'], where: { isActive: true }, _count: { category: true } })`
- Convert groupBy results to Map for O(1) lookups
- No authentication required (public page)
- Follow burgundy design system (same as gigs page)
  </action>
  <verify>
npm run dev
curl http://localhost:3000/categories
# Should return 200 with HTML containing "Browse by Category" and all 13 category cards
  </verify>
  <done>
/categories route returns 200, displays all 13 categories with gig counts, cards link to /gigs with category filter
  </done>
</task>

<task type="auto">
  <name>Create /help page with support information</name>
  <files>src/app/help/page.tsx</files>
  <action>
Create new Server Component page at src/app/help/page.tsx providing help and support information. Follow existing page layout patterns (same container, header, card styling as dashboard/orders pages).

Structure:
- Use same layout: min-h-screen bg-cream-50, max-w-4xl container, px-4 sm:px-6 py-12
- Page header card: bg-white rounded-xl shadow-card p-6 mb-6
  - h1: "Help & Support" (text-2xl sm:text-3xl font-bold text-burgundy-900)
  - Subheading: "Find answers to common questions and learn how to use Herafi"
- Content sections in white cards (bg-white rounded-xl shadow-card p-8 mb-6):
  1. **For Buyers** section
     - How to browse and search services
     - How to place an order
     - How messaging works
     - How to leave reviews
  2. **For Providers** section
     - How to become a provider (link to /provider/setup)
     - How to create gigs
     - How to manage orders
     - Best practices for service descriptions
  3. **Contact Support** section
     - Email: support@herafi.test (placeholder)
     - Response time: 24-48 hours
- Use semantic HTML (sections with h2 headings, ul lists)
- Follow burgundy design system for links and accents

Implementation notes:
- Static content (no database queries)
- No authentication required (public page)
- Use existing typography and spacing patterns
- Links to related pages: /provider/setup, /gigs, /dashboard
  </action>
  <verify>
npm run dev
curl http://localhost:3000/help
# Should return 200 with HTML containing "Help & Support" header and all three sections
  </verify>
  <done>
/help route returns 200, displays help sections for buyers and providers, includes contact information
  </done>
</task>

<task type="auto">
  <name>Create /profile and /settings pages</name>
  <files>
src/app/profile/page.tsx
src/app/settings/page.tsx
  </files>
  <action>
Create two authenticated pages following existing auth patterns (auth() + redirect pattern from dashboard/orders pages).

**1. src/app/profile/page.tsx:**
This page shows the logged-in user their own profile. Since public profiles exist at /u/[username], this should redirect authenticated users to their public profile.

Structure:
- Import { auth } from "@/lib/auth" and { redirect } from "next/navigation"
- Import { prisma } from "@/lib/db"
- Server Component async function
- Call auth() to get session
- If no session: redirect("/login")
- Query user from database to get username
- If username exists: redirect(`/u/${username}`)
- If no username: redirect("/profile/edit") with message prompting setup

Implementation: Simple redirect logic, no UI rendering needed.

**2. src/app/settings/page.tsx:**
Account settings page for authenticated users. Follow dashboard page pattern.

Structure:
- Same auth pattern: auth() + redirect if no session
- Query user data: name, email, username, isProvider
- Layout: min-h-screen bg-cream-50, max-w-4xl container
- Page header card with "Account Settings" title
- Settings sections in white cards:
  1. **Account Information** (read-only display)
     - Email (session.user.email)
     - Username (with "Edit Profile" link to /profile/edit if want to change)
     - Account type: "Buyer" or "Provider" badge
  2. **Provider Status** section
     - If isProvider: Show "Active Provider" with link to /provider/dashboard
     - If NOT isProvider: Show "Become a Provider" CTA with link to /provider/setup
  3. **Danger Zone** section (border-red-200 bg-red-50)
     - Heading: "Delete Account" (text-red-900)
     - Description: "Permanently delete your account and all data. This cannot be undone."
     - Button: "Delete Account" (disabled, text-gray-500, cursor-not-allowed)
     - Note: "(Feature coming soon)" in small text
- Use burgundy design system, follow existing card/button patterns

Implementation notes:
- Both pages require authentication
- /profile is essentially a smart redirect
- /settings is informational (no forms yet - future enhancement)
  </action>
  <verify>
npm run dev
# Test /profile redirect
curl -I http://localhost:3000/profile
# Should return 307 redirect (unauthenticated -> /login)

# Test /settings
curl http://localhost:3000/settings
# Should return 307 redirect or render settings page if session exists
  </verify>
  <done>
/profile route redirects correctly (login if no auth, /u/username or /profile/edit based on username status), /settings route returns 200 with account information sections
  </done>
</task>

<task type="auto">
  <name>Create /provider/gigs page for provider gig management</name>
  <files>src/app/provider/gigs/page.tsx</files>
  <action>
Create provider-only gig management page at src/app/provider/gigs/page.tsx. This is the dedicated provider view for managing all their gigs (alternative to dashboard's truncated list). Follow dashboard pattern for auth and data fetching.

Structure:
- Import auth, redirect, prisma, Link, CATEGORY_LABELS, PricingTiers
- Server Component with auth check
- Require auth: if no session, redirect("/login")
- Query user to check isProvider status
- If NOT isProvider: redirect("/provider/setup") (must become provider first)
- Fetch ALL provider's gigs (no TAKE limit, unlike dashboard):
  ```typescript
  const gigs = await prisma.gig.findMany({
    where: { providerId: session.user.id },
    orderBy: { createdAt: 'desc' },
    select: {
      id: true,
      title: true,
      slug: true,
      category: true,
      pricingTiers: true,
      isActive: true,
      averageRating: true,
      totalReviews: true,
      createdAt: true,
    },
  })
  ```

Layout:
- Same layout: min-h-screen bg-cream-50, max-w-5xl container
- Page header card (bg-white rounded-xl shadow-card p-6 mb-6):
  - h1: "My Gigs" with count badge
  - Create New Gig button (top-right, same styling as dashboard)
- Gig list:
  - If empty: Empty state card with "Create Your First Gig" CTA (same as dashboard empty state)
  - If gigs exist: Map through gigs, each in own card (space-y-4)
  - Card structure (same as dashboard gig cards but with more info):
    - Title + Active/Inactive badge
    - Category label + starting price
    - Rating display (if totalReviews > 0): "‚≠ê {averageRating} ({totalReviews} reviews)"
    - Action buttons: View (link to /gigs/[slug]) + Edit (link to /gigs/[slug]/edit)
- Follow burgundy design system, match dashboard gig card styling exactly

Implementation notes:
- Provider-only page (auth + isProvider check)
- Shows ALL gigs (no pagination needed for v0.2.0 - seed has max ~33 gigs total)
- Reuse existing patterns from dashboard (copy gig card structure)
  </action>
  <verify>
npm run dev
curl -I http://localhost:3000/provider/gigs
# Should return 307 redirect to /login (no auth) or 200 (authenticated provider)
  </verify>
  <done>
/provider/gigs route returns 200 for providers, displays all gigs with full details and management actions, redirects non-providers to /provider/setup
  </done>
</task>

<task type="auto">
  <name>Fix seed script to generate hashed passwords for all seed users</name>
  <files>prisma/seed.ts</files>
  <action>
Update prisma/seed.ts to generate bcrypt-hashed passwords for all seed users (providers and buyers) so developers can log in to test authenticated flows.

Changes required:

1. **Add bcrypt import** (top of file, after existing imports):
   ```typescript
   import bcrypt from 'bcryptjs';
   ```

2. **Update seedUsers function** (starting at line 208):
   - Before the for loop, generate a common hashed password for all seed users:
     ```typescript
     // Standard test password for all seed users (SEED AUTH FIX)
     const TEST_PASSWORD = 'password123';
     const hashedPassword = await bcrypt.hash(TEST_PASSWORD, 10);
     console.log(`üîë Using test password: "${TEST_PASSWORD}" for all seed users`);
     ```
   - Update the user create block (line 222-236) to use hashedPassword:
     - Change `hashedPassword: null,` to `hashedPassword,`

3. **Update seedOrders function** (starting at line 306):
   - Update buyer creation loop (lines 312-325) to use same pattern:
     - Before the for loop, reuse the same TEST_PASSWORD and hashedPassword
     - Change `hashedPassword: null,` (line 323) to `hashedPassword,`

4. **Add login instructions to console output** (in main function, after seeding completes):
   ```typescript
   console.log('\nüéâ Seeding completed successfully!');
   console.log('\nüîê Test Login Credentials:');
   console.log('   Email: provider1@herafi-seed.test (or provider2, buyer1, etc.)');
   console.log('   Password: password123');
   console.log('   Total users: 15 providers + 4 buyers');
   ```

Implementation notes:
- Install bcryptjs if not already: Check package.json, if missing run `npm install bcryptjs` and `npm install -D @types/bcryptjs`
- Use same bcrypt settings as existing auth code (10 rounds)
- Same password for ALL seed users for dev convenience
- Deterministic (password hash will be same across seed runs with same input)
- Console output makes it obvious how to log in
  </action>
  <verify>
npm run dev
# Check if bcryptjs is installed
npm list bcryptjs
# If not installed, install it
npm install bcryptjs @types/bcryptjs

# Run updated seed script
npx prisma db seed

# Console should show: "Using test password: password123"
# Console should show: "Test Login Credentials" section at end

# Test login with seed user
curl -X POST http://localhost:3000/api/auth/callback/credentials \
  -H "Content-Type: application/json" \
  -d '{"email":"provider1@herafi-seed.test","password":"password123"}'
# Should succeed and return session data
  </verify>
  <done>
Seed script generates bcrypt hashed passwords for all 19 seed users, console output shows login instructions, developer can log in with provider1@herafi-seed.test / password123
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Route verification** (no 404s):
   - Visit /categories ‚Üí displays 13 category cards with gig counts
   - Visit /help ‚Üí displays help sections
   - Visit /profile (authenticated) ‚Üí redirects to /u/username or /profile/edit
   - Visit /settings (authenticated) ‚Üí displays account settings
   - Visit /provider/gigs (authenticated provider) ‚Üí displays provider's gigs

2. **Navigation integration**:
   - Click "Categories" in hamburger menu ‚Üí navigates to /categories
   - Click "Help" in hamburger menu ‚Üí navigates to /help
   - Click "Profile" in user dropdown ‚Üí navigates correctly
   - Click "Settings" in user dropdown ‚Üí navigates to /settings
   - Click "My Gigs" in hamburger menu (provider) ‚Üí navigates to /provider/gigs

3. **Authentication test**:
   - Log in with provider1@herafi-seed.test / password123 ‚Üí succeeds
   - Visit authenticated pages ‚Üí no redirects, full functionality

4. **Cross-reference with audit**:
   - All 5 route gaps closed (no 404s)
   - Auth testing gap closed (seed users have passwords)
</verification>

<success_criteria>
**Measurable completion:**

1. HTTP status checks:
   - GET /categories returns 200
   - GET /help returns 200
   - GET /profile returns 307 (redirect)
   - GET /settings returns 200 (with auth)
   - GET /provider/gigs returns 200 (with provider auth)

2. Navigation links resolve:
   - All 5 navigation links from DesktopHamburger.tsx and UserDropdown.tsx resolve without 404

3. Authentication works:
   - Login form accepts provider1@herafi-seed.test / password123
   - Session created successfully
   - Authenticated pages accessible

4. Content verification:
   - /categories displays all 13 categories with counts
   - /help displays 3 sections (buyers, providers, contact)
   - /settings displays account info and provider status
   - /provider/gigs displays all provider's gigs with management actions

5. Audit gap closure:
   - v0.2.0-MILESTONE-AUDIT.md gaps.routes: 0 (was 5)
   - v0.2.0-MILESTONE-AUDIT.md gaps.auth: 0 (was 1)
</success_criteria>

<output>
After completion, create `.planning/phases/12-missing-navigation-routes/12-01-SUMMARY.md`
</output>
